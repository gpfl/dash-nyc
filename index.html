<!-- index.html -->
{% extends "layout.html" %}
{% block content %}
    <div class="row no-gutters">
        <div id="map" class="col-md-7 justify-content-start">
            <script>

                var mapa = [["North Side-South Side",2275],["Bushwick South",1768],["Clinton",1693],["Crown Heights North",1465],["Stuyvesant Heights",1428],["Bedford",1404],["East Village",1387],["Hudson Yards-Chelsea-Flatiron-Union Square",1348],["West Village",1249],["East Williamsburg",1198],["Upper West Side",1176],["Bushwick North",1154],["Midtown-Midtown South",1073],["Greenpoint",1020],["SoHo-TriBeCa-Civic Center-Little Italy",996],["Park Slope-Gowanus",970],["Clinton Hill",909],["Central Harlem North-Polo Grounds",900],["Chinatown",890],["Lower East Side",882],["Turtle Bay-East Midtown",874],["Murray Hill-Kips Bay",843],["Lenox Hill-Roosevelt Island",802],["Battery Park City-Lower Manhattan",798],["Astoria",776],["Yorkville",757],["Hamilton Heights",753],["Central Harlem South",719],["Morningside Heights",684],["Prospect Lefferts Gardens-Wingate",660],["Washington Heights South",612],["Hunters Point-Sunnyside-West Maspeth",597],["East Harlem North",569],["Flatbush",538],["East Harlem South",489],["Fort Greene",476],["Lincoln Square",475],["Carroll Gardens-Columbia Street-Red Hook",447],["Ridgewood",446],["Gramercy",443],["Prospect Heights",441],["DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill",438],["Washington Heights North",359],["Ocean Hill",340],["Manhattanville",334],["Steinway",324],["Upper East Side-Carnegie Hill",315],["Crown Heights South",274],["Jackson Heights",262],["Sunset Park West",249],["Old Astoria",223],["Woodside",216],["Erasmus",195],["Windsor Terrace",194],["Bay Ridge",192],["Elmhurst",190],["Queensbridge-Ravenswood-Long Island City",176],["East New York",170],["Forest Hills",165],["East Flatbush-Farragut",164],["Brooklyn Heights-Cobble Hill",164],["Flushing",163],["Marble Hill-Inwood",155],["Sunset Park East",150],["Canarsie",147],["Hammels-Arverne-Edgemere",139],["Kensington-Ocean Parkway",134],["Cypress Hills-City Line",113],["Woodhaven",108],["Mott Haven-Port Morris",105],["Elmhurst-Maspeth",101],["Rugby-Remsen Village",101],["Rego Park",92],["Flatlands",87],["East Flushing",87],["St. Albans",86],["Richmond Hill",84],["Baisley Park",83],["Midwood",81],["Briarwood-Jamaica Hills",77],["West New Brighton-New Brighton-St. George",77],["Sheepshead Bay-Gerritsen Beach-Manhattan Beach",76],["East Elmhurst",76],["Bensonhurst West",74],["Brighton Beach",72],["Borough Park",71],["Williamsburg",70],["Murray Hill",69],["Queensboro Hill",68],["Springfield Gardens South-Brookville",68],["Stapleton-Rosebank",66],["Springfield Gardens North",64],["Queens Village",63],["Maspeth",60],["Madison",57],["Rosedale",56],["East New York (Pennsylvania Ave)",56],["West Concourse",55],["Homecrest",55],["Corona",54],["Van Cortlandt Village",52],["Williamsbridge-Olinville",52],["East Concourse-Concourse Village",50],["Allerton-Pelham Gardens",50],["park-cemetery-etc-Manhattan",47],["Morrisania-Melrose",45],["Woodlawn-Wakefield",42],["Far Rockaway-Bayswater",41],["Brownsville",40],["Glendale",40],["South Jamaica",40],["Middle Village",40],["New Brighton-Silver Lake",37],["North Corona",37],["Stuyvesant Town-Cooper Village",37],["Kew Gardens",36],["Jamaica",36],["Schuylerville-Throgs Neck-Edgewater Park",36],["Soundview-Castle Hill-Clason Point-Harding Park",36],["Bensonhurst East",35],["Mount Hope",34],["University Heights-Morris Heights",34],["Grasmere-Arrochar-Ft. Wadsworth",33],["Pelham Bay-Country Club-City Island",33],["South Ozone Park",33],["Ozone Park",32],["Pelham Parkway",32],["Spuyten Duyvil-Kingsbridge",31],["Bayside-Bayside Hills",31],["Bedford Park-Fordham North",30],["Pomonok-Flushing Heights-Hillcrest",29],["Gravesend",29],["Old Town-Dongan Hills-South Beach",29],["Kew Gardens Hills",29],["Highbridge",29],["Laurelton",28],["park-cemetery-etc-Brooklyn",27],["park-cemetery-etc-Queens",27],["Eastchester-Edenwald-Baychester",26],["Seagate-Coney Island",25],["Melrose South-Mott Haven North",25],["Belmont",24],["Hunts Point",24],["North Riverdale-Fieldston-Riverdale",24],["Parkchester",24],["Cambria Heights",24],["Jamaica Estates-Holliswood",23],["Norwood",23],["Ocean Parkway South",22],["Hollis",22],["Van Nest-Morris Park-Westchester Square",20],["Lindenwood-Howard Beach",20],["Breezy Point-Belle Harbor-Rockaway Park-Broad Channel",20],["Bronxdale",19],["New Dorp-Midland Beach",19],["Fresh Meadows-Utopia",19],["College Point",18],["Kingsbridge Heights",18],["Grymes Hill-Clifton-Fox Hills",17],["Co-op City",15],["Auburndale",15],["West Farms-Bronx River",15],["Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill",15],["Great Kills",15],["Fordham South",14],["Dyker Heights",14],["Bellerose",14],["Georgetown-Marine Park-Bergen Beach-Mill Basin",14],["Mariner's Harbor-Arlington-Port Ivory-Graniteville",13],["Longwood",13],["Douglas Manor-Douglaston-Little Neck",12],["Whitestone",12],["Westchester-Unionport",12],["Bath Beach",12],["New Springville-Bloomfield-Travis",11],["Soundview-Bruckner",11],["Claremont-Bathgate",10],["Crotona Park East",10],["Port Richmond",9],["Oakland Gardens",8],["East Tremont",8],["Annadale-Huguenot-Prince's Bay-Eltingville",7],["Charleston-Richmond Valley-Tottenville",7],["Westerleigh",6],["Oakwood-Oakwood Beach",6],["Ft. Totten-Bay Terrace-Clearview",6],["park-cemetery-etc-Bronx",5],["Rossville-Woodrow",4],["West Brighton",4],["Arden Heights",2],["Starrett City",1]];
                
                Highcharts.getJSON('https://raw.githubusercontent.com/gpfl/dash-nyc/master/data/nyc-neigh.geo.json', function (geojson) {

                    // Initiate the chart
                    var chart1 = new Highcharts.mapChart('map', {

                        chart: {
                            backgroundColor: '#007D8C',
                            margin: [5,5,5,5]
                        },

                        credits: {
                            enabled: false
                        },
                
                        title: {
                            text: ''
                        },
                        xAxis: {
                            minRange: .01
                        },
                        yAxis: {
                            minRange: .01
                        },
                
                        mapNavigation: {
                            enabled: true,
                            buttonOptions: {
                                verticalAlign: 'bottom'
                            },
                            buttons: {
                                zoomIn: {
                                    onclick: function () { this.mapZoom(0.4); }
                                },
                                zoomOut: {
                                    onclick: function () { this.mapZoom(2.5); }
                                }
                            }
                        },
                
                        colorAxis: [{
                            tickPixelInterval: 400,
                            minColor: '#FFF6E6',
                            maxColor: '#a84543'
                        }],
                
                        series: [{
                            mapData: geojson,
                            keys: ['ntaname','value'],
                            joinBy: 'ntaname',
                            data: mapa,
                            states: {
                                hover: {
                                    color: '#BADA55'
                                }
                            },
                            tooltip: {
                                enabled: true,
                                format: '{point.name}'
                            }
                        }]
                    });


                    var h =  window.innerHeight;
                    chart1.setSize(undefined, h);
                });
            </script>        
        </div>
        <div class="col-md-5" id="sidebar">
            <div class="row no-gutters">
                <h3>NYC Airbnb Rent Prices</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                 incididunt ut labore et dolore magna aliqua. Tristique senectus et netus et malesuada
                  fames ac turpis egestas. Non blandit massa enim nec dui nunc mattis. Massa ultricies.</p>
            </div>
            <div class="row no-gutters justify-content-start" id = "indicadores">
                <div class="col-sm-5" id="semicircle">
                    <script>
                        $('#semicircle').css({'height':'17em'})
                        $('#pyramid').css({'height':'100px'})

                        var chart4 = new Highcharts.chart('semicircle', {
                            chart: {
                                backgroundColor: null,
                                plotBackgroundColor: null,
                                plotBorderWidth: 0,
                                plotShadow: false
                            },
                            title: {
                                text: 'Borough',
                                align: 'center',
                                verticalAlign: 'middle',
                            },
                            credits: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    dataLabels: {
                                        enabled: true,
                                        distance: -20,
                                        style: {
                                            fontWeight: 'bold',
                                            color: 'white'
                                        }
                                    },
                                    center: ['60%', '50%'],
                                    startAngle: -150,
                                    endAngle: 150,
                                    size: '100%'
                                }
                            },
                            series: [{
                                type: 'pie',
                                name: 'Browser share',
                                innerSize: '50%',
                                data: [
                                    ['Chrome', 58.9],
                                    ['Firefox', 13.29],
                                    ['Internet Explorer', 13],
                                    ['Edge', 3.78],
                                    ['Safari', 3.42],
                                    {
                                        name: 'Other',
                                        y: 7.61,
                                        dataLabels: {
                                            enabled: true
                                        }
                                    }
                                ]
                            }]
                        });
                    </script>
                </div>
                <div class="col-sm-7" id="pyramid">
                    <script>
                        var chart2 = new Highcharts.chart('pyramid', {
                            chart: {
                                type: 'pyramid',
                                backgroundColor: null
                            },

                            credits: {
                                enabled: false
                            },

                            title: {
                                text: '',
                            },
                            plotOptions: {
                                series: {
                                        /*allowPointSelect: true,
                                                cursor: "pointer",*/
                                    dataLabels: {
                                        enabled: true
                                    },
                                    center: ['40%', '40%'],
                                    height: '60%',
                                    width: '45%'
                                }
                            },
                            legend: {
                                enabled: true
                            },
                            series: [{
                                name: 'Unique users',
                                data: [
                                    ['Bottom 75%',      	15654],
                                    ['Top 25%',            4064],
                                    ['Top 10%', 					 1987],
                                    ['Top 5%',          	  976],
                                    ['Top 1%',              846]
                                ]
                            }],

                            responsive: {
                                rules: [{
                                    condition: {
                                        maxWidth: 500
                                    },
                                    chartOptions: {
                                        plotOptions: {
                                            series: {
                                                dataLabels: {
                                                    inside: false
                                                }
                                            }
                                        }
                                    }
                                }]
                            }
                        });
                        var h3 =  window.innerHeight*(2/5);
                        chart2.setSize(undefined, h3);                
                    </script>
                </div>
            </div>
            <div class="row no-gutters" id="combo">
                <script>
                    $('#sidebar').css({'background-color': 'rgba(0,0,0,0.2)',
                                        'margin-left': '-5%',
                                        'padding-left': '2%',
                                        'padding-right': '2%',
                                        'padding-bottom': '.3%',
                                        'width': '45%'
                    });
                    
                    var chart3 = new Highcharts.chart('combo', {
                        chart: {
                            backgroundColor: 'rgba(0,0,0,0)'
                        },

                        credits: {
                            enabled: false
                        },

                        title: {
                            text: ''
                        },
                        xAxis: {
                            categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums'],
                            gridLineColor: '#707073',
                            labels: {
                                style: {
                                    color: '#E0E0E3'
                                }
                            },
                            lineColor: '#707073',
                            minorGridLineColor: '#505053',
                            tickColor: '#707073',
                            title: {
                                style: {
                                    color: '#A0A0A3'

                                }
                            }
                        },
                        yAxis: {
                            gridLineColor: '#E0E0E3',
                            labels: {
                                style: {
                                    color: '#E0E0E3'
                                }
                            },
                            lineColor: '#E0E0E3',
                            minorGridLineColor: '#505053',
                            tickColor: '#E0E0E3',
                            tickWidth: 1,
                            title: {
                                style: {
                                    color: '#A0A0A3'
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.85)',
                            style: {
                                color: '#F0F0F0'
                            }
                        },
                        labels: {
                            items: [{
                                html: 'Total fruit consumption',
                                style: {
                                    left: '50px',
                                    top: '18px',
                                    color: '#E0E0E3'
                                }
                            }]
                        },
                        legend: {
                            backgroundColor: 'rgba(0, 0, 0, 0.2)',
                            itemStyle: {
                                color: '#E0E0E3'
                            },
                            itemHoverStyle: {
                                color: '#FFF'
                            },
                            itemHiddenStyle: {
                                color: '#606063'
                            },
                            title: {
                                style: {
                                    color: '#C0C0C0'
                                }
                            }
                        },
                        series: [{
                            type: 'column',
                            name: 'Jane',
                            data: [3, 2, 1, 3, 4]
                        }, {
                            type: 'column',
                            name: 'John',
                            data: [2, 3, 5, 7, 6]
                        }, {
                            type: 'column',
                            name: 'Joe',
                            data: [4, 3, 3, 9, 0]
                        }, {
                            type: 'spline',
                            name: 'Average',
                            data: [3, 2.67, 3, 6.33, 3.33],
                            marker: {
                                lineWidth: 2,
                                lineColor: Highcharts.getOptions().colors[3],
                                fillColor: 'white'
                            }
                        }, {
                            type: 'pie',
                            name: 'Total consumption',
                            data: [{
                                name: 'Jane',
                                y: 13,
                                color: Highcharts.getOptions().colors[0] // Jane's color
                            }, {
                                name: 'John',
                                y: 23,
                                color: Highcharts.getOptions().colors[1] // John's color
                            }, {
                                name: 'Joe',
                                y: 19,
                                color: Highcharts.getOptions().colors[2] // Joe's color
                            }],
                            center: [100, 50],
                            size: 70,
                            showInLegend: false,
                            dataLabels: {
                                enabled: false
                            }
                        }]
                    });
                    var h2 =  window.innerHeight*(2/5);
                    chart3.setSize(undefined, h2);                
                </script>
            </div>
        </div>
    </div>
{% endblock %}